<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from xdocs/index.xml at 14 September 2021
 | Rendered using Apache Maven Fluido Skin 1.9
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.2" />
    <meta name="author" content="Eric PUgh" />
    <title>Fulcrum Pool &#x2013; Fulcrum Pool Component</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.9.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.9.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="https://turbine.apache.org/" id="bannerLeft" title="Apache Turbine"><img src="https://turbine.apache.org/images/turbine-project.png"  alt="Apache Turbine"/></a></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 14 September 2021<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.0.6-SNAPSHOT</li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://turbine.apache.org/fulcrum/" class="externalLink" title="Fulcrum">Fulcrum</a></li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://turbine.apache.org/" class="externalLink" title="Turbine">Turbine</a></li>
      <li class="pull-right"><a href="https://www.apache.org" class="externalLink" title="Apache">Apache</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li class="active"><a href="#"><span class="none"></span>Main</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-down"></span>Project Information</a>
     <ul class="nav nav-list">
      <li><a href="dependencies.html" title="Dependencies"><span class="none"></span>Dependencies</a></li>
      <li><a href="dependency-info.html" title="Dependency Information"><span class="none"></span>Dependency Information</a></li>
      <li><a href="distribution-management.html" title="Distribution Management"><span class="none"></span>Distribution Management</a></li>
      <li class="active"><a href="#"><span class="none"></span>About</a></li>
      <li><a href="issue-management.html" title="Issue Management"><span class="none"></span>Issue Management</a></li>
      <li><a href="licenses.html" title="Licenses"><span class="none"></span>Licenses</a></li>
      <li><a href="mailing-lists.html" title="Mailing Lists"><span class="none"></span>Mailing Lists</a></li>
      <li><a href="plugin-management.html" title="Plugin Management"><span class="none"></span>Plugin Management</a></li>
      <li><a href="plugins.html" title="Plugins"><span class="none"></span>Plugins</a></li>
      <li><a href="scm.html" title="Source Code Management"><span class="none"></span>Source Code Management</a></li>
      <li><a href="summary.html" title="Summary"><span class="none"></span>Summary</a></li>
      <li><a href="team.html" title="Team"><span class="none"></span>Team</a></li>
     </ul></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
   <li class="nav-header">Apache</li>
    <li><a href="https://www.apache.org/" class="externalLink" title="Apache Website"><span class="none"></span>Apache Website</a></li>
    <li><a href="https://www.apache.org/licenses/" class="externalLink" title="License"><span class="none"></span>License</a></li>
    <li><a href="https://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works"><span class="none"></span>How the ASF works</a></li>
    <li><a href="https://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship"><span class="none"></span>Sponsorship</a></li>
    <li><a href="https://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks"><span class="none"></span>Thanks</a></li>
    <li><a href="https://www.apache.org/security/" class="externalLink" title="Security"><span class="none"></span>Security</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >


  

  <section>
<h2><a name="Overview"></a>Overview</h2>

    
<p>
      The Pool Service extends the functionality of the Factory Service by adding
      support for pooling objects instantiated from the given class name or
      Class object reference. Pooling of objects stabilizes memory consumption and
      reduces garbage collection making response times in server applications
      more predictable.
    </p>
    
    
<p>
      When a new instance is requested from the service, it first checks its pool
      if one is available. If the the pool is empty, a new object will be instantiated
      from the given class. If the class is specified by its name, the request to create
      an instance will be forwarded to the Factory Service.
    </p>

    
<p>
      For pooled objects implementing the Recyclable interface, a recycle method
      will be called, when they are taken from the pool, and a dispose method,
      when they are returned to the pool. Implementations of the methods should
      clear and initialize the pooled instances correspondingly. Objects
      that do not implement the interface can also be pooled, if they do not
      need to perform any specific actions during pooling. A RecyclableSupport class
      can be extended to get a minimal implementation of the interface.
    </p>
    
    
<p>
      An ArrayCtorRecyclable interface extends the Recyclable interface providing
      a more efficient recycle method with less reflection for recycling frequently
      used objects having constructors with parameters.
    </p>
  </section>

  <section>
<h2><a name="Configuration"></a>Configuration</h2>
    <section>
<h3><a name="Role_Configuration"></a>Role Configuration</h3>
      
<p>
        This component requires the FactoryService component.
      </p>
      
<div class="source"><pre class="prettyprint">
    &lt;role
        name=&quot;org.apache.fulcrum.pool.PoolService&quot;
        shorthand=&quot;pool&quot;
        default-class=&quot;org.apache.fulcrum.pool.DefaultPoolService&quot;/&gt;

    &lt;role
        name=&quot;org.apache.fulcrum.factory.FactoryService&quot;
        shorthand=&quot;factory&quot;
        default-class=&quot;org.apache.fulcrum.factory.DefaultFactoryService&quot;/&gt;
      </pre></div>
    </section>

    <section>
<h3><a name="Component_Configuration"></a>Component Configuration</h3>
      
<table border="0" class="table table-striped">
        
<tr class="a">
          
<th>Item</th>
          
<th>Datatype</th>
          
<th>Cardinality</th>
          
<th>Description</th>
        </tr>
        
<tr class="b">
          
<td>capacity</td>
          
<td>Complex</td>
          
<td>[0|1]</td>
          
<td>
            The parent element for defining pool capacities. Sub-elements define
            capacities for certain class names. You can define one
            <code>default</code> pool that will be used if no others
            match. If not specified, a default capacity of 128 is used. See 
            the configuration example below.
          </td>
        </tr>
      </table>
    </section>

    <section>
<h3><a name="Component_Configuration_Example"></a>Component Configuration Example</h3>
      
<div class="source"><pre class="prettyprint">
    &lt;pool&gt;
        &lt;capacity&gt;
            &lt;javax.xml.parsers.DocumentBuilder&gt;
                256
            &lt;/javax.xml.parsers.DocumentBuilder&gt;
            &lt;default&gt;
                128
            &lt;/default&gt;
        &lt;/capacity&gt;
    &lt;/pool&gt;

    &lt;factory&gt;
        ...
    &lt;/factory&gt;
      </pre></div>
    </section>
  </section>

  <section>
<h2><a name="Usage"></a>Usage</h2>

    
<p>
      The Pool Service can be called instead of the Factory Service, when instantiating
      objects that are needed repeatedly e.g. for processing client requests. Instances
      of RunData implementations, ParameterParser and CookieParser implementations,
      Pull Service tools, etc, are typical examples of pooled objects. Used objects
      must be returned to the Pool Service for recycling.
    </p>


<div class="source"><pre class="prettyprint">
// Access the service singleton.
PoolService service = (PoolService)container.lookup(PoolService.ROLE);

// Get a pooled DOM parser.
DocumentBuilder parser =
    service.getInstance(&quot;javax.xml.parsers.DocumentBuilder&quot;);

// Parse an XML document.
Document doc = parser.parse(myfile);

// Return the parser to the pool.
service.putInstance(parser);
</pre></div>

  </section>



        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2005&#x2013;2021
<a href="https://www.apache.org/">The Apache Software Foundation</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
